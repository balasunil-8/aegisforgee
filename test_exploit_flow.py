import requests

BASE='http://localhost:5000'

# login as alice
r=requests.post(BASE+'/api/auth/login', json={'email':'alice.jones@example.com','password':'AlicePass1!'})
print('alice login:', r.status_code, r.text)
if r.ok:
    t=r.json().get('access_token')
    # alice reads order 2 (BOLA)
    rr=requests.get(BASE+'/api/orders/2', headers={'Authorization':f'Bearer {t}'})
    print('alice read order2:', rr.status_code, rr.text[:300])

# login as admin
ra=requests.post(BASE+'/api/auth/login', json={'email':'admin@example.com','password':'Admin123'})
print('admin login:', ra.status_code, ra.text)
if ra.ok:
    at=ra.json().get('access_token')
    logs=requests.get(BASE+'/api/logs', headers={'Authorization':f'Bearer {at}'})
    print('logs:', logs.status_code)
    if logs.ok:
        data=logs.json()
        print('latest log count:', len(data.get('logs',[])))
        for l in data.get('logs',[])[:10]:
            print(l)
